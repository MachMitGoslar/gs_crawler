# =============================================================================
# Production Docker Compose for GS Crawler Stack
# GENERATED FILE - Do not edit directly!
# Edit crawlers.yaml and run: python scripts/generate-compose.py
# Uses pre-built images from GitHub Container Registry
# =============================================================================

services:
  # === INFRASTRUCTURE ===
  gs_health_monitor:
    image: ghcr.io/machmitgoslar/gs_crawler_000_health_monitor:latest
    volumes:
      - ./httpdocs/crawler:/app/output
      - ./crawlers.yaml:/app/configs/crawlers.yaml:ro
    ports:
      - "5015:5000"
    container_name: gs_health_monitor
    restart: unless-stopped
    depends_on:
      - gs_generic_scraper_simple
      - gs_generic_scraper_tschuessschule

  # === NEWS & MEDIA ===
  gs_compiler_001_senioren:
    image: ghcr.io/machmitgoslar/gs_crawler_001_senioren:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_001_senioren
    restart: unless-stopped

  gs_compiler_040_hp:
    image: ghcr.io/machmitgoslar/gs_crawler_040_hp:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_040_hp
    restart: unless-stopped

  # === EVENTS ===
  gs_compiler_002_fepa:
    image: ghcr.io/machmitgoslar/gs_crawler_002_ferienpass:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_002_fepa
    restart: unless-stopped

  gs_compiler_014_kunst_in_ar:
    image: ghcr.io/machmitgoslar/gs_crawler_014_kunst_in_ar:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_014_kunst_in_ar
    restart: unless-stopped

  gs_compiler_019_was_app:
    image: ghcr.io/machmitgoslar/gs_crawler_019_was_app:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_019_was_app
    restart: unless-stopped

  gs_compiler_027_erster_freitag:
    image: ghcr.io/machmitgoslar/gs_crawler_027_erster_freitag:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_027_erster_freitag
    restart: unless-stopped

  # === LOCAL COMMUNITIES ===
  # === COMMUNITY & VOLUNTEERING ===
  gs_compiler_031_goslarer_geschichten:
    image: ghcr.io/machmitgoslar/gs_crawler_031_goslarer_geschichten:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_031_goslarer_geschichten
    restart: unless-stopped

  gs_compiler_042_freiwilligen:
    image: ghcr.io/machmitgoslar/gs_crawler_042_freiwilligen:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_042_freiwilligen
    restart: unless-stopped

  # === ENVIRONMENTAL MONITORING ===
  gs_compiler_035_talsperren:
    image: ghcr.io/machmitgoslar/gs_crawler_035_talsperren:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_035_talsperren
    restart: unless-stopped

  gs_compiler_045_naturgefahren:
    image: ghcr.io/machmitgoslar/gs_crawler_045_naturgefahren:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_045_naturgefahren
    restart: unless-stopped

  gs_compiler_047_bodenwasser:
    image: ghcr.io/machmitgoslar/gs_crawler_047_bodenwasser:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_047_bodenwasser
    restart: unless-stopped

  # === EDUCATION ===
  # === SPECIALIZED ===
  gs_compiler_032_webcams_goslar:
    image: ghcr.io/machmitgoslar/gs_crawler_032_webcams_goslar:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_032_webcams_goslar
    restart: unless-stopped

  gs_compiler_033_goslar24-7:
    image: ghcr.io/machmitgoslar/gs_crawler_033_goslar24-7:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_033_goslar_24-7
    restart: unless-stopped

  gs_compiler_056_serviceportal:
    image: ghcr.io/machmitgoslar/gs_crawler_056_serviceportal:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    container_name: gs_compiler_056_serviceportal
    restart: unless-stopped

  # === API SERVICES ===
  gs_compiler_068_altstadtfest:
    image: ghcr.io/machmitgoslar/gs_crawler_068_altstadtfest:latest
    volumes:
      - ./httpdocs/crawler:/app/output
    ports:
      - "5016:5000"
    container_name: gs_compiler_068_altstadtfest
    restart: unless-stopped

  # === GENERIC SCRAPER (Config-Driven) ===
  gs_generic_scraper_simple:
    image: ghcr.io/machmitgoslar/gs_crawler_generic_scraper:latest
    volumes:
      - ./httpdocs/crawler:/app/output
      - ./crawler_configs/simple:/app/configs
    container_name: gs_generic_scraper_simple
    restart: unless-stopped

  gs_generic_scraper_tschuessschule:
    image: ghcr.io/machmitgoslar/gs_crawler_generic_scraper:latest
    volumes:
      - ./httpdocs/crawler:/app/output
      - ./crawler_configs/tschuessschule:/app/configs
    container_name: gs_generic_scraper_tschuessschule
    restart: unless-stopped

# Shared volume for all output files
volumes:
  crawler_output:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ./httpdocs/crawler
